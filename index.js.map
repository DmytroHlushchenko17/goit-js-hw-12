{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '53360478-1bf245edf032d22b013a2c514';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getImagesByQuery(query) {\n  if (!query) return Promise.resolve(null);\n\n  const url =\n    BASE_URL +\n    `?key=${API_KEY}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  return axios.get(url).then(function (response) {\n    return response.data;\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const searchForm = document.querySelector('.form');\nexport const galleryEl = document.querySelector('.js-gallery');\n\nexport function clearGallery() {\n  if (galleryEl) galleryEl.innerHTML = '';\n}\n\nexport const showLoader = () =>\n  document.body && document.body.classList.add('is-loading');\nexport const hideLoader = () =>\n  document.body && document.body.classList.remove('is-loading');\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  if (!Array.isArray(images) || !galleryEl) {\n    clearGallery();\n    return;\n  }\n\n  const markup = images\n    .map(img => {\n      const {\n        largeImageURL = '#',\n        webformatURL = '',\n        tags = '',\n        likes = 0,\n        views = 0,\n        comments = 0,\n        downloads = 0,\n      } = img || {};\n\n      return `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link js-gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><span>Likes:</span> ${likes}</p>\n          <p class=\"info-item\"><span>Views:</span> ${views}</p>\n          <p class=\"info-item\"><span>Comments:</span> ${comments}</p>\n          <p class=\"info-item\"><span>Downloads:</span> ${downloads}</p>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  galleryEl.innerHTML = markup;\n  if (simpleLightbox && typeof simpleLightbox.refresh === 'function')\n    simpleLightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  searchForm,\n} from './js/render-functions.js';\n\nif (!searchForm) {\n  console.warn('Search form not found (.form)');\n} else {\n  searchForm.addEventListener('submit', onSearchFormSubmit);\n}\n\nexport function onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const input = form.elements['search-text'];\n  const query = ((input && input.value) || '').trim();\n\n  if (!query) {\n    iziToast.warning({ message: 'The input must not be empty' });\n    return;\n  }\n\n  showLoader();\n\n  getImagesByQuery(query)\n    .then(function (data) {\n      if (!data || !Array.isArray(data.hits) || data.hits.length === 0) {\n        clearGallery();\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          color: 'red',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      createGallery(data.hits);\n    })\n    .catch(function (err) {\n      clearGallery();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n      console.error(err);\n    })\n    .finally(function () {\n      hideLoader();\n    });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","url","axios","response","searchForm","galleryEl","clearGallery","showLoader","hideLoader","simpleLightbox","SimpleLightbox","createGallery","images","markup","img","largeImageURL","webformatURL","tags","likes","views","comments","downloads","onSearchFormSubmit","event","input","iziToast","data","err"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,SAASC,EAAiBC,EAAO,CACtC,GAAI,CAACA,EAAO,OAAO,QAAQ,QAAQ,IAAI,EAEvC,MAAMC,EACJH,EACA,QAAQD,CAAO,MAAM,mBACnBG,CACD,CAAA,2DAEH,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAK,SAAUE,EAAU,CAC7C,OAAOA,EAAS,IACpB,CAAG,CACH,CCdO,MAAMC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAY,SAAS,cAAc,aAAa,EAEtD,SAASC,GAAe,CACzBD,IAAWA,EAAU,UAAY,GACvC,CAEO,MAAME,EAAa,IACxB,SAAS,MAAQ,SAAS,KAAK,UAAU,IAAI,YAAY,EAC9CC,EAAa,IACxB,SAAS,MAAQ,SAAS,KAAK,UAAU,OAAO,YAAY,EAExDC,EAAiB,IAAIC,EAAe,aAAc,CACtD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,GAAI,CAAC,MAAM,QAAQA,CAAM,GAAK,CAACP,EAAW,CACxCC,IACA,MACD,CAED,MAAMO,EAASD,EACZ,IAAIE,GAAO,CACV,KAAM,CACJ,cAAAC,EAAgB,IAChB,aAAAC,EAAe,GACf,KAAAC,EAAO,GACP,MAAAC,EAAQ,EACR,MAAAC,EAAQ,EACR,SAAAC,EAAW,EACX,UAAAC,EAAY,CACpB,EAAUP,GAAO,CAAA,EAEX,MAAO;AAAA;AAAA,wDAE2CC,CAAa;AAAA,4CACzBC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,qDAGjBC,CAAK;AAAA,qDACLC,CAAK;AAAA,wDACFC,CAAQ;AAAA,yDACPC,CAAS;AAAA;AAAA,YAGlE,CAAK,EACA,KAAK,EAAE,EAEVhB,EAAU,UAAYQ,EAClBJ,GAAkB,OAAOA,EAAe,SAAY,YACtDA,EAAe,QAAO,CAC1B,CC5CKL,EAGHA,EAAW,iBAAiB,SAAUkB,CAAkB,EAFxD,QAAQ,KAAK,+BAA+B,EAKvC,SAASA,EAAmBC,EAAO,CACxCA,EAAM,eAAc,EAGpB,MAAMC,EADOD,EAAM,cACA,SAAS,aAAa,EACnCvB,GAAUwB,GAASA,EAAM,OAAU,IAAI,OAE7C,GAAI,CAACxB,EAAO,CACVyB,EAAS,QAAQ,CAAE,QAAS,6BAA+B,CAAA,EAC3D,MACD,CAEDlB,IAEAR,EAAiBC,CAAK,EACnB,KAAK,SAAU0B,EAAM,CACpB,GAAI,CAACA,GAAQ,CAAC,MAAM,QAAQA,EAAK,IAAI,GAAKA,EAAK,KAAK,SAAW,EAAG,CAChEpB,IACAmB,EAAS,KAAK,CACZ,QACE,2EACF,MAAO,MACP,SAAU,UACpB,CAAS,EACD,MACD,CAEDd,EAAce,EAAK,IAAI,CAC7B,CAAK,EACA,MAAM,SAAUC,EAAK,CACpBrB,IACAmB,EAAS,MAAM,CACb,QACE,2EACF,MAAO,MACP,SAAU,UAClB,CAAO,EACD,QAAQ,MAAME,CAAG,CACvB,CAAK,EACA,QAAQ,UAAY,CACnBnB,GACN,CAAK,CACL"}